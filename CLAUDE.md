# One Percent Stats

This repository contains the source code for the One Percent Stats application, a web-based analytics dashboard for tracking and visualizing leads data.

## Coding Guidelines

- **Language**: The project is written in TypeScript.
- **Frameworks**:
  - **Backend**: Hono on Cloudflare Workers.
  - **Frontend**: React with Vite.
- **Database**: D1, Cloudflare's serverless database.
- **ORM**: Drizzle ORM.
- **Authentication**: better-auth.
- **Linting and Formatting**: Biome.

## Codebase Layout

The repository is a monorepo managed by Bun. It is divided into two main applications: `apps/server` and `apps/web`.

### `apps/server`

This directory contains the backend application.

- **`src/`**: The source code for the server.
  - **`db/`**: Contains the database schema, migrations, and connection logic.
    - **`migrations/`**: Database migration files generated by Drizzle Kit.
    - **`schema/`**: Drizzle ORM schema definitions for the database tables.
    - **`index.ts`**: The main database connection file.
    - **`script-db.ts`**: A separate database connection for running local scripts.
  - **`lib/`**: Contains shared libraries and utilities.
    - **`auth.ts`**: The authentication configuration using `better-auth`.
  - **`routers/`**: Hono router definitions for different API endpoints.
    - **`analytics.ts`**: API endpoints for the analytics dashboard.
    - **`index.ts`**: The main router file.
  - **`scripts/`**: Scripts for various tasks, such as importing data.
    - **`create-db-from-sql.ts`**: A script to create a local database from a SQL file.
    - **`import-leads.ts`**: A script to import leads data from a CSV file.
  - **`index.ts`**: The main entry point for the server application.
- **`.env.example`**: An example environment file.
- **`drizzle.config.ts`**: The configuration file for Drizzle Kit.
- **`package.json`**: The dependencies and scripts for the server application.
- **`tsconfig.json`**: The TypeScript configuration for the server.
- **`worker-configuration.d.ts`**: Type definitions for the Cloudflare Worker environment.
- **`wrangler.jsonc`**: The configuration file for Cloudflare Workers.

### `apps/web`

This directory contains the frontend application.

- **`public/`**: Public assets for the web application.
- **`src/`**: The source code for the frontend.
  - **`components/`**: Reusable React components.
  - **`lib/`**: Shared libraries and utilities for the frontend.
  - **`routes/`**: The pages of the application.
  - **`index.css`**: The main stylesheet.
  - **`root.tsx`**: The root component of the application.
  - **`routes.ts`**: The route definitions for the application.
- **`.env.example`**: An example environment file.
- **`package.json`**: The dependencies and scripts for the web application.
- **`tsconfig.json`**: The TypeScript configuration for the web application.
- **`vite.config.ts`**: The configuration file for Vite.
- **`wrangler.jsonc`**: The configuration file for deploying the frontend to Cloudflare Pages.

### Root

- **`.gitignore`**: A list of files and directories to ignore in Git.
- **`biome.json`**: The configuration file for Biome.
- **`bun.lock`**: The lockfile for Bun.
- **`package.json`**: The root `package.json` file for the monorepo.
- **`README.md`**: The main README file for the project.
- **`turbo.json`**: The configuration file for Turborepo.
